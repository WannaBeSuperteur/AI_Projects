## 목차

* [1. 정량적 성능 평가](#1-정량적-성능-평가)
  * [1-1. MSE & MAE & Corr-coef](#1-1-mse--mae--corr-coef)
  * [1-2. Confusion Matrix 및 오답 분석](#1-2-confusion-matrix-및-오답-분석)
* [2. 각 불량 언어 Category 별 테스트 결과 & 실제 사용자 프로그램에 적용할 threshold](#2-각-불량-언어-category-별-테스트-결과--실제-사용자-프로그램에-적용할-threshold)
* [3. Detailed Test Result](#3-detailed-test-result)

## 1. 정량적 성능 평가

### 1-1. MSE & MAE & Corr-coef

* Prediction : **-1.0 ~ +1.0** (Cosine Similarity)
* Ground Truth : **0** (해당 카테고리 아님) **or 1** (해당 카테고리)

| MSE<br>(Mean-Squared Error) | MAE<br>(Mean-Absolute Error) | Corr-coef<br>(between Prediction & Ground-truth) |
|-----------------------------|------------------------------|--------------------------------------------------|
| 0.0138                      | 0.0261                       | +0.9568                                          |

### 1-2. Confusion Matrix 및 오답 분석

* Confusion Matrix
  * Predicted value 가 **가장 큰 (= 1.0 에 가장 가까운)** category 기준 
  * 괄호 안은 **Accuracy** 

| Pred \ True | 사랑 고백/만남   | 일반         | 정치      | 패드립     | 혐오/기타      | total   | precision    |
|-------------|------------|------------|---------|---------|------------|---------|--------------|
| 사랑 고백/만남    | 31         | 1          | 0       | 0       | 0          | **32**  | **0.9688**   |
| 일반          | 4          | 84         | 0       | 0       | 2          | **90**  | **0.9333**   |
| 정치          | 0          | 0          | 20      | 0       | 0          | **20**  | **1.0**      |
| 패드립         | 0          | 0          | 0       | 20      | 0          | **20**  | **1.0**      |
| 혐오/기타       | 0          | 0          | 0       | 0       | 28         | **28**  | **1.0**      |
| **total**   | **35**     | **60**     | **20**  | **20**  | **30**     | **135** |              |
| **recall**  | **0.8857** | **0.9882** | **1.0** | **1.0** | **0.9333** |         | **(0.9632)** |

* 오답 분석
  * 전반적으로 **크게 심각한 부분 (예: 명백히 정상적인 내용을 극단적 혐오 표현으로 판단, 혐오 표현을 지극히 정상적인 내용으로 판단)** 가능성은 **거의 없음**
  * 일부 케이스에 대해 '오답'이 발생하지만 심각한 문제는 아님
    * '여행 가서 도둑질한다'는 내용의 경우, 장난성 표현일 가능성 + [실제 로그에서 LLM 이 부정적인 입장의 답변을 한다는 점](../fine_tuning/logs/kananai_output_message_5epochs_inference_log_0.6.txt) 으로 보아 심각한 문제는 아니라고 판단

| 문장                                 | S-BERT 모델 예측                                | 실제 정답          | 심각성         |
|------------------------------------|---------------------------------------------|----------------|-------------|
| ```사랑해 로라야```                      | ```일반```<br>(Prediction: **+0.8740**)       | ```사랑 고백/만남``` | ```매우 낮음``` |
| ```로라야 내가 좋은 술집 아는데 거기서 데이트 어때?``` | ```일반```<br>(Prediction: **+0.9399**)       | ```사랑 고백/만남``` | ```낮음```    |
| ```로라야 사💗랑💗해```                  | ```일반```<br>(Prediction: **+0.9921**)       | ```사랑 고백/만남``` | ```매우 낮음``` |
| ```로라 너는 여신이야```                   | ```일반```<br>(Prediction: **+0.9779**)       | ```사랑 고백/만남``` | ```매우 낮음``` |
| ```로라야 AI는 나야 둘이 될 수 없어```         | ```사랑 고백/만남```<br>(Prediction: **+0.9754**) | ```일반```       | ```보통```    |
| ```그러면 여행 가서 도둑질 하는거 어때?```        | ```일반```<br>(Prediction: **+0.9942**)       | ```혐오/기타```    | ```보통```    |
| ```여행 가서 도둑질 하는 거 재미있겠지?```        | ```일반```<br>(Prediction: **+0.9942**)       | ```혐오/기타```    | ```보통```    |

## 2. 각 불량 언어 Category 별 테스트 결과 & 실제 사용자 프로그램에 적용할 threshold

* 전체 요약
  * 각 불량 언어 Category 별, **실제 해당 Category / 일반 Category 문장에 대한 S-BERT 모델의 예측값 분포** 를 나타낸 것
  * 실제 사용자 프로그램에 적용할 threshold는 **S-BERT 모델이 오검출하여 이용 정지되는 것을 방지** 하기 위해, **불량 언어가 확실한 경우에만 제재** 하도록 **1.0 에 가까운 높은 값** 으로 해야 함

|                       | ```사랑 고백/만남```                | ```정치```  | ```패드립``` | ```혐오/기타```                   |
|-----------------------|-------------------------------|-----------|-----------|-------------------------------|
| 예측값 분포 특징             | **일부 case 에 대해 크게 잘못된 예측 존재** | 모두 정확히 예측 | 모두 정확히 예측 | **일부 case 에 대해 크게 잘못된 예측 존재** |
| 불량 언어 심각성             | 가장 낮음                         | 낮음        | **높음**    | **보통**                        |
| 사용자 프로그램 적용 threshold | **0.98**                      | 0.95      | 0.9       | 0.9                           |

* **1. ```사랑 고백/만남```**
  * 대부분 정확히 예측하지만, 일부 case 에 대해 크게 잘못된 예측 존재 + **가장 minor 한 불량 언어 카테고리** 에 해당
  * **threshold = 0.98**

| 카테고리               | S-BERT 모델 예측값 분포 |
|--------------------|------------------|
| **```사랑 고백/만남```** |                  |
| ```일반```           |                  |

* **2. ```정치```**
  * 모든 test case 에 대해 정확히 예측 + **비교적 minor 한 불량 언어** 카테고리에 해당
  * **threshold = 0.95**

| 카테고리         | S-BERT 모델 예측값 분포 |
|--------------|------------------|
| **```정치```** |                  |
| ```일반```     |                  |

* **3. ```패드립```**
  * 모든 test case 에 대해 정확히 예측 + **심각성이 높은 불량 언어** 카테고리에 해당
  * **threshold = 0.9**

| 카테고리          | S-BERT 모델 예측값 분포 |
|---------------|------------------|
| **```패드립```** |                  |
| ```일반```      |                  |

* **4. ```혐오/기타```**
  * 대부분 정확히 예측하지만, 일부 case 에 대해 크게 잘못된 예측 존재 + **심각성이 보통 이상인 불량 언어** 카테고리에 해당
  * **threshold = 0.9**

| 카테고리          | S-BERT 모델 예측값 분포 |
|---------------|------------------|
| **```패드립```** |                  |
| ```일반```      |                  |

## 3. Detailed Test Result

* [Confusion Matrix (test_3_confusion_matrix.csv)](test_results/test_3_confusion_matrix.csv)
* [Test Result (test_3_result.csv)](test_results/test_3_result.csv)
* [Prediction Table of Test Result (test_3_result_prediction_table.csv)](test_results/test_3_result_prediction_table.csv)
